{
  "workflow_name": "control_flow_test",
  "workflow_version": "1.0.0",
  "category": "test",
  "description": "Test workflow with decide and user_choose steps",

  "phases": [
    {
      "phase": "TEST",
      "description": "Test control flow",
      "steps": [
        {
          "step": 1,
          "type": "user_ask",
          "prompt": "Enter a short message (less than 10 chars):",
          "save_to": "message",
          "next_step": 2
        },
        {
          "step": 2,
          "type": "decide",
          "condition": "context.message.length > 10",
          "if_true": 3,
          "if_false": 4
        },
        {
          "step": 3,
          "type": "display",
          "message": "Your message is LONG: {message}",
          "next_step": 5
        },
        {
          "step": 4,
          "type": "display",
          "message": "Your message is SHORT: {message}",
          "next_step": 5
        },
        {
          "step": 5,
          "type": "user_choose",
          "prompt": "What would you like to do next?",
          "options": [
            {
              "label": "Say goodbye",
              "value": "goodbye",
              "next_step": 6
            },
            {
              "label": "Show summary",
              "value": "summary",
              "next_step": 7
            },
            {
              "label": "Exit immediately",
              "value": "exit",
              "next_step": "EXIT"
            }
          ]
        },
        {
          "step": 6,
          "type": "display",
          "message": "Goodbye! Your message was: {message}",
          "next_step": "EXIT"
        },
        {
          "step": 7,
          "type": "display",
          "message": "Summary: You entered '{message}' which has {message.length} characters",
          "next_step": "EXIT"
        }
      ]
    }
  ]
}
