{
  "workflow_name": "workflow_creator_test",
  "workflow_version": "1.0.0",
  "category": "test",
  "description": "AI-assisted workflow creation with user collaboration",
  "provider": "claude_code",
  "model": "claude-sonnet-4",

  "phases": [
    {
      "phase": "SETUP",
      "description": "Prepare AI for workflow creation",
      "steps": [
        {
          "step": 1,
          "type": "display",
          "message": "=== Workflow Creator Assistant ===\nThis workflow helps you design new Argo workflows with AI guidance.\n",
          "next_step": 2
        },
        {
          "step": 2,
          "type": "ci_analyze",
          "task": "You are a workflow design assistant for Argo, a C-based workflow automation system. Your role is to help users design workflows by understanding their requirements and guiding them through the design process.\n\nKey workflow concepts:\n- Steps execute sequentially with explicit next_step transitions\n- Step types: display, user_ask, ci_analyze, user_ci_chat, save_file, decide\n- Context variables store data between steps using save_to field\n- Variable substitution in messages using {{variable_name}} syntax\n- Workflows are defined in JSON with phases containing steps\n\nRespond with: 'I'm ready to help you design a workflow. What would you like your workflow to accomplish?'",
          "save_to": "ai_intro",
          "next_step": 3
        },
        {
          "step": 3,
          "type": "display",
          "message": "{{ai_intro}}\n",
          "next_step": 4
        }
      ]
    },
    {
      "phase": "DESIGN",
      "description": "Collaborative workflow design",
      "steps": [
        {
          "step": 4,
          "type": "user_ci_chat",
          "save_to": "design_session",
          "next_step": 5
        },
        {
          "step": 5,
          "type": "display",
          "message": "\n=== Design Session Complete ===\nWorkflow design discussion saved.\nNext: Review and generate the workflow JSON.\n",
          "next_step": 6
        }
      ]
    },
    {
      "phase": "GENERATE",
      "description": "Generate workflow JSON",
      "steps": [
        {
          "step": 6,
          "type": "ci_analyze",
          "task": "Based on our design discussion:\n{{design_session}}\n\nGenerate a complete Argo workflow JSON that implements this design. Include:\n1. Appropriate workflow_name, version, description\n2. One or more phases with descriptive names\n3. Steps that accomplish the user's goals\n4. Proper next_step transitions\n5. Context variables for data flow\n\nProvide ONLY the JSON, no explanation.",
          "save_to": "workflow_json",
          "next_step": 7
        },
        {
          "step": 7,
          "type": "display",
          "message": "\n=== Generated Workflow ===\n{{workflow_json}}\n\n=== Next Steps ===\n1. Review the workflow above\n2. Save to workflows/templates/your_name.json\n3. Test with: arc workflow start your_name test1 main\n",
          "next_step": "EXIT"
        }
      ]
    }
  ]
}
