{
  "name": "parallel-feature",
  "description": "Multi-CI parallel development workflow",
  "category": "development",
  "event": "feature",

  "personnel": [
    {
      "role": "requirements",
      "provider": "claude",
      "min_count": 1,
      "max_count": 1
    },
    {
      "role": "builder",
      "provider": "gpt4",
      "min_count": 2,
      "max_count": 3
    },
    {
      "role": "analysis",
      "provider": "gemini",
      "min_count": 1,
      "max_count": 1
    }
  ],

  "phases": [
    {
      "phase": 0,
      "name": "Initialize",
      "description": "Setup parallel development environment",
      "checkpoint": false,
      "tasks": [
        {
          "description": "Create feature branches",
          "required_role": "builder",
          "parallel_allowed": false
        }
      ]
    },
    {
      "phase": 1,
      "name": "Planning",
      "description": "Requirements analysis",
      "checkpoint": true,
      "tasks": [
        {
          "description": "Write requirements document",
          "required_role": "requirements",
          "parallel_allowed": false
        },
        {
          "description": "Design system architecture",
          "required_role": "requirements",
          "parallel_allowed": false
        }
      ]
    },
    {
      "phase": 2,
      "name": "Development",
      "description": "Parallel implementation",
      "checkpoint": false,
      "tasks": [
        {
          "description": "Implement API layer",
          "required_role": "builder",
          "parallel_allowed": true
        },
        {
          "description": "Implement business logic",
          "required_role": "builder",
          "parallel_allowed": true
        },
        {
          "description": "Implement data layer",
          "required_role": "builder",
          "parallel_allowed": true
        }
      ]
    },
    {
      "phase": 3,
      "name": "Testing",
      "description": "Test each component",
      "checkpoint": false,
      "tasks": [
        {
          "description": "Test API endpoints",
          "required_role": "builder",
          "parallel_allowed": true
        },
        {
          "description": "Test business logic",
          "required_role": "builder",
          "parallel_allowed": true
        },
        {
          "description": "Integration tests",
          "required_role": "analysis",
          "parallel_allowed": false
        }
      ]
    },
    {
      "phase": 4,
      "name": "Merging",
      "description": "Merge parallel branches",
      "checkpoint": true,
      "tasks": [
        {
          "description": "Resolve merge conflicts",
          "required_role": "analysis",
          "parallel_allowed": false
        }
      ]
    },
    {
      "phase": 5,
      "name": "Review",
      "description": "Final review and validation",
      "checkpoint": false,
      "tasks": [
        {
          "description": "Code review",
          "required_role": "analysis",
          "parallel_allowed": false
        },
        {
          "description": "Security review",
          "required_role": "analysis",
          "parallel_allowed": false
        }
      ]
    },
    {
      "phase": 6,
      "name": "Complete",
      "description": "Finalize and commit",
      "checkpoint": false,
      "tasks": [
        {
          "description": "Create final commit",
          "required_role": "builder",
          "parallel_allowed": false
        }
      ]
    }
  ],

  "artifacts": [
    {
      "name": "requirements.md",
      "location": "argo/workflow",
      "lifecycle": "workflow",
      "required": true
    },
    {
      "name": "architecture.md",
      "location": "argo/workflow",
      "lifecycle": "workflow",
      "required": true
    },
    {
      "name": "test-report.html",
      "location": "argo/workflow",
      "lifecycle": "workflow",
      "required": true
    },
    {
      "name": "build-logs",
      "location": "/tmp",
      "lifecycle": "temp",
      "required": false
    }
  ],

  "success_criteria": {
    "all_tasks_complete": true,
    "all_tests_pass": true,
    "no_conflicts": true,
    "custom_check": "make test-quick"
  }
}
